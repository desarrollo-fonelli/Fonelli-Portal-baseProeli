<div class="container float-left">
  <p>
    <button type="button" class="btnFonelliAzul btn" (click)="collapse.toggle()" [attr.aria-expanded]="!isCollapsed"
      aria-controls="collapseExample">
      Filtros
    </button>
  </p>
</div>

<!----------------- Container para Formulario de Criterios de Filtro ------------------>
<div class="container float-left" #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
  <div class="card">
    <div class="card-body">

      <div class="card-title h3 fw-bold mb-4" style="color: #24a4cc;">
        Reporte de Prepedidos
      </div>

      <form>
        <!-------------------- Filtro Oficinas ----------------------->
        <div class="form-row" [hidden]="bCliente">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Desde oficina</label>
            <select class="form-select" name="idDesOfi" #nombre="ngModel" [(ngModel)]="oBuscar.OficinaDesde" required>
              <option value="{{dato.OficinaCodigo}}" *ngFor="let dato of oOficinasRes.Contenido">{{dato.OficinaCodigo}}
                - {{dato.OficinaNombre}}</option>
            </select>
          </div>
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Hasta oficina</label>
            <select class="form-select" name="idHasOfi" #nombre="ngModel" [(ngModel)]="oBuscar.OficinaHasta" required>
              <option value="{{dato.OficinaCodigo}}" *ngFor="let dato of oOficinasRes.Contenido">{{dato.OficinaCodigo}}
                - {{dato.OficinaNombre}}</option>
            </select>
          </div>
        </div> <!-- Filtro Oficinas -->

        <!----------------- Filtro rango de Clientes ----------------->
        <div class="form-row">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Desde cliente</label>
            <input type="text" id="idDesCli" class="form-control" name="idDesCli" #nombre="ngModel"
              [(ngModel)]="oBuscar.ClienteDesde" disabled="{{ bCliente }}" required>
          </div>

          <div class="form-group col-md-3">
            <label class="CamposFonelli">Filial</label>
            <input type="text" id="idDesFil" class="form-control" name="idDesFil" #nombre="ngModel"
              [(ngModel)]="oBuscar.FilialDesde" disabled="{{ bCliente }}" required>
          </div>

          <div class="form-group col-md-3" [hidden]="bCliente">
            <label class="CamposFonelli col-md-12" style="color:white;">-</label>
            <button type="button" class="btnFonelli btn" (click)="openClientes(Clientes,true)"
              style="background-color:#24a4cc;"><i class="bi bi-search"></i></button>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Hasta cliente</label>
            <input type="text" id="idHasCli" class="form-control" name="idHasCli" #nombre="ngModel"
              [(ngModel)]="oBuscar.ClienteHasta" disabled="{{ bCliente }}" required>
          </div>
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Filial</label>
            <input type="text" id="idHasFil" class="form-control" name="idHasFil" #nombre="ngModel"
              [(ngModel)]="oBuscar.FilialHasta" disabled="{{ bCliente }}" required>
          </div>

          <div class="form-group col-md-3" [hidden]="bCliente">
            <label class="CamposFonelli col-md-12" style="color:white;">-</label>
            <button type="button" class="btnFonelli btn" (click)="openClientes(Clientes,false)"
              style="background-color:#24a4cc;"><i class="bi bi-search"></i></button>
          </div>
        </div> <!-- Filtro rango de Clientes-->

        <!-------------------- Filtro rango de Agentes ------------------>
        <div class="form-row" [hidden]="bCliente">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Desde agente</label>
            <select class="form-select" name="idAgeDesde" #idAgeDesde="ngModel" [(ngModel)]="oBuscar.AgenteDesde"
              [disabled]="sTipo == 'A' " required>
              <ng-container *ngFor='let dato of oAgentesCon;'>
                <option value="{{dato.AgenteCodigo}}">
                  {{dato.AgenteCodigo}} - {{dato.AgenteNombre}}
                </option>
              </ng-container>
            </select>
          </div>
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Hasta agente</label>
            <select class="form-select" name="idHasAge" #idHasAge="ngModel" [(ngModel)]="oBuscar.AgenteHasta"
              [disabled]="sTipo == 'A' " required>
              <ng-container *ngFor='let dato of oAgentesCon;'>
                <option value="{{dato.AgenteCodigo}}">
                  {{dato.AgenteCodigo}} - {{dato.AgenteNombre}}
                </option>
              </ng-container>
            </select>
          </div>
        </div>

        <!-------------------- Filtro rango de Fechas -------------------->
        <div class="form-row">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Desde fecha Prepedido</label>
            <div class="input-group">
              <input type="date" id="idDesFP" class="form-control" name="idDesFP" #nombre="ngModel"
                [(ngModel)]="oBuscar.FechaPrepDesde" required>
            </div>
          </div>
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Hasta fecha Prepedido</label>
            <div class="input-group">
              <input type="date" id="idHasFP" class="form-control" name="idHasFP" #nombre="ngModel"
                [(ngModel)]="oBuscar.FechaPrepHasta" required>
            </div>
          </div>
        </div>

        <!------------------ Filtro por rango de Folios ------------------>
        <div class=" form-row">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Desde Folio</label>
            <input type="text" id="FolioDesde" class="form-control" name="FolioDesde" #FolioDesde="ngModel"
              [(ngModel)]="oBuscar.FolioDesde" />
          </div>
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Hasta Folio</label>
            <input type="text" id="FolioHasta" class="form-control" name="FolioHasta" #FolioHasta="ngModel"
              [(ngModel)]="oBuscar.FolioHasta" />
          </div>
        </div>

        <!------------------ Filtro por Orden de Compra ----------------->
        <div class=" form-row">
          <div class="form-group col-md-3">
            <label class="CamposFonelli">Orden de Compra</label>
            <input type="text" id="OrdenCompra" class="form-control" name="OrdenCompra" #OrdenCompra="ngModel"
              [(ngModel)]="oBuscar.OrdenCompra" />
          </div>
        </div>

        <!----------------------- Boton de radio Status ------------------------->
        <div class="row">
          <div class="form-group col-md-3">
            <p class="CamposFonelli">Status</p>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="status-activos" name="rdStatus" value="A"
                #rdStatus="ngModel" [(ngModel)]="oBuscar.Status">
              <label for="status-activos" class="form-check-label CamposFonelli">Activos</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="status-inactivos" name="rdStatus" value="I"
                #rdStatus="ngModel" [(ngModel)]="oBuscar.Status">
              <label for="status-inactivos" class="form-check-label CamposFonelli">Inactivos</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="status-todos" name="rdStatus" value="T"
                #rdStatus="ngModel" [(ngModel)]="oBuscar.Status">
              <label for="status-todos" class="form-check-label CamposFonelli">Todos</label>
            </div>
          </div>

          <!-------------------- Boton de radio Documentados -------------------->
          <div class="form-group col-md-3">
            <p class="CamposFonelli">Pago documentado</p>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="docum-document" name="rdDocumentados"
                value="Documentados" #rdDocumentados="ngModel" [(ngModel)]="oBuscar.Documentados">
              <label class="form-check-label CamposFonelli" for="docum-document">Documentados</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="docum-nodocum" name="rdDocumentados" value="NoDocumentad"
                #rdDocumentados="ngModel" [(ngModel)]="oBuscar.Documentados">
              <label class="form-check-label CamposFonelli" for="docum-nodocum">No Documentados</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="docum-todos" name="rdDocumentados" value="Todos"
                #rdDocumentados="ngModel" [(ngModel)]="oBuscar.Documentados">
              <label class="form-check-label CamposFonelli" for="docum-todos">Todos</label>
            </div>
          </div>

          <!-------------------- Boton de radio Autorizados --------------------->
          <div class="form-group col-md-3">
            <p class="CamposFonelli">Autorizados</p>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="autoriz-autoriz" name="rdAutorizados" value="Autorizados"
                #rdAutorizados="ngModel" [(ngModel)]="oBuscar.Autorizados">
              <label class="form-check-label CamposFonelli" for="autoriz-autoriz">Autorizados</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="autoriz-noautoriz" name="rdAutorizados"
                value="NoAutorizad" #rdAutorizados="ngModel" [(ngModel)]="oBuscar.Autorizados">
              <label class="form-check-label CamposFonelli" for="autoriz-noautoriz">No Autorizados</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" id="autoriz-todos" name="rdAutorizados" value="Todos"
                #rdAutorizados="ngModel" [(ngModel)]="oBuscar.Autorizados">
              <label class="form-check-label CamposFonelli" for="autoriz-todos">Todos</label>
            </div>
          </div>
        </div> <!-- .row Botones de radio -->

        <!-------------------------- Linea de mensajes -------------------------->
        <div *ngIf="sMensaje">
          <p class="alert alert-danger" role="alert">{{sMensaje}}</p>
        </div>

        <!----------------------------- Botón Buscar ---------------------------->
        <div class="form-row">
          <div class="form-group col-md-6">
            <button type="submit" (click)="ListaPrepedidos()" class="btnFonelli btn"> <span *ngIf="bCargando"
                class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="color:#183e6f"> </span>
              BUSCAR</button>
          </div>
        </div>


      </form>

    </div> <!-- .card-body -->
  </div> <!-- .card -->
</div> <!-- .container formulario de criterios-->

<!--------------------------- Tabla con Lista de prepedidos --------------------------->
<div class="container float-left" [hidden]="!mostrarTabla" id="containerTablaPrepedidos" #containerTablaPrepedidos>
  <div class="h4" style="text-align: center;color: #24a4cc;"><strong>Tabla de Prepedidos</strong></div>
  <br>
  <table id="tabla0" class="table table-hover table-striped" datatable [dtOptions]="dtOptions[0]"
    [dtTrigger]="dtTrigger0">
    <thead class="thead-p">
      <!------------ Encabezado Columnas ------------>
      <tr class="EncTabla">
        <th class="thFonelli-center" scope="col">Prepedido</th>
        <th class="thFonelli-center" class="col-fecha" scope="col">Fecha</th>
        <th class="thFonelli-center" class="col-fecha" scope="col">FechaCanc</th>
        <th class="thFonelli-center" scope="col">Stat</th>
        <th class="thFonelli-center" scope="col">Cliente</th>
        <th class="thFonelli-center" scope="col">Nombre</th>
        <th class="thFonelli-center" scope="col">Agente</th>
        <th class="thFonelli-center" scope="col">OrdenCompra</th>
        <th class="thFonelli-center" scope="col">Piezas</th>
        <th class="thFonelli-right" scope="col">Gramos</th>
        <th class="thFonelli-right" scope="col">Importe</th>
        <th class="thFonelli-center" scope="col">Docum</th>
        <th class="thFonelli-center" scope="col">Plazo</th>
        <th class="thFonelli-center" scope="col">DSQ</th>
        <th class="thFonelli-center" scope="col">Aut</th>
        <!--
        <th class="thFonelli-left" scope="col">Observaciones</th>
        <th class="thFonelli-center" scope="col">3</th>
        <th class="thFonelli-center" scope="col">3.5</th>
        <th class="thFonelli-center" scope="col">4</th>
        <th class="thFonelli-center" scope="col">4.5</th>
        <th class="thFonelli-center" scope="col">5</th>
        <th class="thFonelli-center" scope="col">5.5</th>
        <th class="thFonelli-center" scope="col">6</th>
        <th class="thFonelli-center" scope="col">6.5</th>
        <th class="thFonelli-center" scope="col">7</th>
        <th class="thFonelli-center" scope="col">7.5</th>
        <th class="thFonelli-center" scope="col">8</th>
        <th class="thFonelli-center" scope="col">8.5</th>
        <th class="thFonelli-center" scope="col">9</th>
        <th class="thFonelli-center" scope="col">9.5</th>
        <th class="thFonelli-center" scope="col">10</th>
        <th class="thFonelli-center" scope="col">10.5</th>
        <th class="thFonelli-center" scope="col">11</th>
        <th class="thFonelli-center" scope="col">11.5</th>
        <th class="thFonelli-center" scope="col">12</th>
        <th class="thFonelli-center" scope="col">12.5</th>
        <th class="thFonelli-center" scope="col">13</th>
        <th class="thFonelli-center" scope="col">13.5</th>
        <th class="thFonelli-center" scope="col">14</th>
        <th class="thFonelli-center" scope="col">14.5</th>
        <th class="thFonelli-center" scope="col">15</th>
        <th class="thFonelli-center" scope="col">15.5</th>
        <th class="thFonelli-center" scope="col">MPX</th>
        <th class="thFonelli-center" scope="col">CPX</th>
        -->

      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let ofc of oPrepedOficinas; let i=index">
        <!------------ Encabezado Oficina ------------>
        <tr class="table-info">
          <th colspan="6" class="FilasFonelli-center">{{ofc.OficinaCode + ' ' + ofc.OficinaNom}}</th>
          <th style="display: none"></th>
          <th style="display: none"></th>
          <th style="display: none"></th>
          <th style="display: none"></th>
          <th style="display: none"></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <!--
          <th style="text-align: center;">{{ ofc.PzasOfic | number: '1.0-0'}}</th>
          <th style="text-align: right;">{{ ofc.GrmsOfic | number:'1.2-2'}}</th>
          <th style="text-align: right;">{{ ofc.ImpOfic | number:'1.2-2' }}</th>
          -->
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <!--
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          -->
        </tr>

        <!------------ Lista prepedidos ------------>
        <ng-container *ngFor="let ped of ofc.Pedidos; let j=index">
          <tr>
            <td class="FilasFonelli-center text-primary" (click)="FilasPreped(ped)"><u>{{ ped.PedFolio }}</u></td>
            <td class="FilasFonelli" style="text-align: center;min-width: 11ch;">{{ped.PedFecha}}</td>
            <td class="FilasFonelli" style="text-align: center;min-width: 11ch;">{{ped.FechaCanc}}</td>
            <td class="FilasFonelli-center">{{ ped.Status }}</td>
            <td class="FilasFonelli" style="text-align: center;min-width: 9ch;">{{ ped.PedClteCode + '-' +
              ped.PedClteFil.trim()}}</td>
            <td class="FilasFonelli"
              style="text-align: left;min-width: 18ch;max-width: 24ch;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
              {{ ped.PedClteNom }}</td>
            <td class="FilasFonelli-center">{{ ped.AgenteCode }}</td>
            <td class="FilasFonelli-center">{{ ped.OrdenCompra }}</td>
            <td class="FilasFonelli" style="text-align: center;">{{ ped.PedPiezas }}</td>
            <td class="FilasFonelli" style="text-align: right;">{{ ped.PedGramos | number:'1.2-2' }}</td>
            <td class="FilasFonelli" style="text-align: right;">{{ ped.PedImporte | number:'1.2-2' }}</td>
            <td class="FilasFonelli-center">{{ ped.Documentado }}</td>
            <td class="FilasFonelli-center">{{ ped.PlazoDias>0 ? ped.PlazoDias : ''}}</td>
            <td class="FilasFonelli-center">{{ ped.PlazoTipo }}</td>
            <td class="FilasFonelli-center">{{ ped.DocAutoriz }}</td>

            <!--
            <td class="FilasFonelli" style="text-align: left;min-width: 20ch;">
              {{ ped.Observac }}</td>
            <td class="FilasFonelli-center">{{ped.cp3 ? ped.cp3 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp35 ? ped.cp35 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp4 ? ped.cp4 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp45 ? ped.cp45 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp5 ? ped.cp5 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp55 ? ped.cp55 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp6 ? ped.cp6 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp65 ? ped.cp65 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp7 ? ped.cp7 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp75 ? ped.cp75 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp8 ? ped.cp8 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp85 ? ped.cp85 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp9 ? ped.cp9 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp95 ? ped.cp95 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp10 ? ped.cp10 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp105 ? ped.cp105 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp11 ? ped.cp11 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp115 ? ped.cp115 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp12 ? ped.cp12 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp125 ? ped.cp125 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp13 ? ped.cp13 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp135 ? ped.cp135 : '' }}</td>
            <td class="FilasFonelli-center">{{ped.cp14 ? ped.cp14 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp145 ? ped.cp145 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp15 ? ped.cp15 : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cp155 ? ped.cp155 : '' }}</td>
            <td class="FilasFonelli-center">{{ped.mpx ? ped.mpx : ''}}</td>
            <td class="FilasFonelli-center">{{ped.cpx ? ped.cpx : ''}}</td>
            -->

          </tr>
        </ng-container>
        <!------------ Totales Oficina ------------>
        <tr class="table-warning">
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th style="text-align: right;">Totales Oficina {{ofc.OficinaCode}}</th>
          <th></th>
          <th></th>
          <th style="text-align: center;">{{ ofc.PzasOfic | number: '1.0-0'}}</th>
          <th style="text-align: right;">{{ ofc.GrmsOfic | number:'1.2-2'}}</th>
          <th style="text-align: right;">{{ ofc.ImpOfic | number:'1.2-2' }}</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </ng-container>
    </tbody>
  </table>

</div> <!-- .container containerTablaPrepedidos-->

<div class="container float-left" [hidden]="!mostrarTabla" id="containerTablaResumen" #containerTablaResumen>
  <br>
  <br>
  <div class="h4" style="text-align: center;color: #24a4cc;"><strong>Resumen por Oficina</strong></div>
  <table id="tablaResumen" class="table table-hover table-striped table-sm">
    <thead class="thead-p">
      <tr class="EncTabla">
        <th class="thFonelli-center">Ofic</th>
        <th class="thFonelli-left">Nombre</th>
        <th class="thFonelli-right" scope="col">Pedidos</th>
        <th class="thFonelli-right" scope="col">Piezas</th>
        <th class="thFonelli-right" scope="col">Gramos</th>
        <th class="thFonelli-right" scope="col">Importe</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ofc of oPrepedOficinas">
        <td class="FilasFonelli-center"><strong>{{ofc.OficinaCode}}</strong></td>
        <td class="FilasFonelli"><strong>{{ofc.OficinaNom}}</strong></td>
        <td class="FilasFonelli" style="text-align: right;">{{ ofc.NumPedOfic | number: '1.0-0'}}</td>
        <td class="FilasFonelli" style="text-align: right;">{{ ofc.PzasOfic | number: '1.0-0'}}</td>
        <td class="FilasFonelli" style="text-align: right;">{{ ofc.GrmsOfic | number:'1.2-2'}}</td>
        <td class="FilasFonelli" style="text-align: right;">{{ ofc.ImpOfic | number:'1.2-2' }}</td>
      </tr>
      <tr class="table-warning">
        <th class="thFonelli-center"></th>
        <th class="thFonelli-left">Totales</th>
        <th class="thFonelli-right">{{ granTotal.granTotalNumPed | number: '1.0-0' }}</th>
        <th class="thFonelli-right">{{ granTotal.granTotalPiezas | number: '1.0-0' }}</th>
        <th class="thFonelli-right">{{ granTotal.granTotalGramos | number: '1.2-2' }}</th>
        <th class="thFonelli-right">{{ granTotal.granTotalImporte | number: '1.2-2' }}</th>
      </tr>
    </tbody>
  </table>
</div>

<!------------------------ Fin Tabla con Lista de prepedidos -------------------------->


<!--------------------------- Tabla detalle Prepedido --------------------------------->
<div class="container float-left" [hidden]="!mostrarDetalle">
  <br>
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <div class="row">
          <div class="col-md-5">
            <button type="submit" class="btn btn-link" (click)="ClicCerrarDetalle()">
              Volver a Lista de Prepedidos</button>
          </div>
          <div class="col-md-3">
            <div class="fs-5 pt-2">Prepedido: <strong>{{ oDocPreped.PedFolio }}</strong></div>
          </div>
          <div class="col-md-4" style="text-align: right;">
            <div class="fs-6 pt-2">
              Fecha: <strong>{{ oDocPreped.PedFecha }}</strong>
              {{' | Canc: ' }}<strong>{{ oDocPreped.FechaCanc }}</strong>
              {{' | Status: ' }}<strong>{{ oDocPreped.Status }}</strong>
            </div>
          </div>
        </div>
      </div> <!-- .card-title -->
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-9"><strong>{{ oDocPreped.PedClteCode +'-'+oDocPreped.PedClteFil+' '+
            oDocPreped.PedClteNom + ' | ' + oDocPreped.PedClteSuc }}</strong></div>
        <div class="col-md-3">{{ 'Orden Compra: ' }}<strong>{{ oDocPreped.OrdenCompra }}</strong></div>
      </div>
      <div class="row">
        <div class="col-md-7">{{ 'Agente: ' + oDocPreped.AgenteCode + ' ' +
          oDocPreped.AgenteNom}}</div>
        <div class="col-md-5"><strong>{{ oDocPreped.Observac }}</strong></div>
      </div>

      <br>

      <div class="row">
        <div class="container" id="DetallePrepedTable" #DetallePrepedTable style="overflow-x: auto;">
          <table id="tabla1" class="table table-hover table-sm table-striped display nowrap" datatable
            [dtOptions]="dtOptions[1]" [dtTrigger]="dtTrigger1" style="width:100%">

            <thead class="thead-p">
              <tr class="EncTabla">
                <th class="thFonelli-center" scope="col">Lin</th>
                <th class="thFonelli-left" scope="col">Modelo</th>
                <th class="thFonelli-left" scope="col">Descripción</th>
                <th class="thFonelli-center" scope="col">Piezas</th>
                <th class="thFonelli-center" scope="col">Gramos</th>
                <th class="thFonelli-right" scope="col">Precio</th>
                <th class="thFonelli-center" scope="col">Calc</th>
                <th class="thFonelli-right" scope="col">Importe</th>
                <th class="thFonelli-left" scope="col">Observaciones</th>
                <th class="thFonelli-center" scope="col">3</th>
                <th class="thFonelli-center" scope="col">3.5</th>
                <th class="thFonelli-center" scope="col">4</th>
                <th class="thFonelli-center" scope="col">4.5</th>
                <th class="thFonelli-center" scope="col">5</th>
                <th class="thFonelli-center" scope="col">5.5</th>
                <th class="thFonelli-center" scope="col">6</th>
                <th class="thFonelli-center" scope="col">6.5</th>
                <th class="thFonelli-center" scope="col">7</th>
                <th class="thFonelli-center" scope="col">7.5</th>
                <th class="thFonelli-center" scope="col">8</th>
                <th class="thFonelli-center" scope="col">8.5</th>
                <th class="thFonelli-center" scope="col">9</th>
                <th class="thFonelli-center" scope="col">9.5</th>
                <th class="thFonelli-center" scope="col">10</th>
                <th class="thFonelli-center" scope="col">10.5</th>
                <th class="thFonelli-center" scope="col">11</th>
                <th class="thFonelli-center" scope="col">11.5</th>
                <th class="thFonelli-center" scope="col">12</th>
                <th class="thFonelli-center" scope="col">12.5</th>
                <th class="thFonelli-center" scope="col">13</th>
                <th class="thFonelli-center" scope="col">13.5</th>
                <th class="thFonelli-center" scope="col">14</th>
                <th class="thFonelli-center" scope="col">14.5</th>
                <th class="thFonelli-center" scope="col">15</th>
                <th class="thFonelli-center" scope="col">15.5</th>
                <th class="thFonelli-center" scope="col">MPX</th>
                <th class="thFonelli-center" scope="col">CPX</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let itm of oFilasPreped; let i=index">
                <td class="FilasFonelli-center">{{ itm.ItemLinea }}</td>
                <td class="FilasFonelli-left">{{ itm.ItemCodigo }}</td>
                <td class="FilasFonelli"
                  style="text-align: left;min-width: 14ch;max-width: 20ch;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                  {{ itm.ItemDescripc }}</td>
                <td class="FilasFonelli-center">{{ itm.Piezas }}</td>
                <td class="FilasFonelli-center">{{ itm.Gramos | number:'1.1-1'}}</td>
                <td class="FilasFonelli-right">{{ itm.Precio | number:'1.2-2'}}</td>
                <td class="FilasFonelli-center">{{ (itm.TipoCosto == 2) ? 'Grms' : 'Pzas' }}</td>
                <td class="FilasFonelli-right">{{ itm.Importe | number:'1.2-2'}}</td>
                <td class="FilasFonelli"
                  style="text-align: left;min-width: 14ch;max-width: 24ch;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                  {{ (itm.ItemAlta + ' ' + itm.Observac).trim() }}
                </td>
                <td class="FilasFonelli-center">{{itm.cp3 ? itm.cp3 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp35 ? itm.cp35 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp4 ? itm.cp4 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp45 ? itm.cp45 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp5 ? itm.cp5 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp55 ? itm.cp55 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp6 ? itm.cp6 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp65 ? itm.cp65 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp7 ? itm.cp7 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp75 ? itm.cp75 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp8 ? itm.cp8 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp85 ? itm.cp85 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp9 ? itm.cp9 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp95 ? itm.cp95 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp10 ? itm.cp10 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp105 ? itm.cp105 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp11 ? itm.cp11 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp115 ? itm.cp115 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp12 ? itm.cp12 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp125 ? itm.cp125 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp13 ? itm.cp13 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp135 ? itm.cp135 : '' }}</td>
                <td class="FilasFonelli-center">{{itm.cp14 ? itm.cp14 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp145 ? itm.cp145 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp15 ? itm.cp15 : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cp155 ? itm.cp155 : '' }}</td>
                <td class="FilasFonelli-center">{{itm.mpx ? itm.mpx : ''}}</td>
                <td class="FilasFonelli-center">{{itm.cpx ? itm.cpx : ''}}</td>
              </tr>
            </tbody>
          </table>
        </div> <!-- .container DetallePrepedTable -->
      </div> <!-- .row -->
    </div> <!-- .card-body -->
  </div> <!-- card -->
</div>
<!------------------------- Fin Tabla detalle prepedido ------------------------------->


<!--Modal catalogo clientes-->
<ng-template #Clientes let-modal>
  <div class="modal-header">
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body-tables" style="overflow-y: scroll;">

    <div class="container">
      <div class="row">

        <div class="form-group col-md-1">
          <br>
          <label class="CamposFonelli">Buscar:</label>
        </div>
        <div class="form-group col-md-5">
          <br>
          <input type="text" class="form-control" [(ngModel)]="searchtext" placeholder="Search" />
        </div>


        <div class="col-12">
          <table class="table table-striped">
            <thead class="thead-p2">
              <tr class="EncTabla">
                <th>#</th>
                <th scope="col"></th>
                <th scope="col">NUM</th>
                <th scope="col">FIL</th>
                <th scope="col">RAZÓN SOCIAL</th>
                <th scope="col">SUCURSAL/NOMBRE</th>
                <th scope="col">S</th>
                <th scope="col">CONTACTO1</th>
                <th scope="col">CONTACTO2</th>
              </tr>
            </thead>
            <tbody>
              <td *ngIf="bCargandoClientes" class="FilasFonelli" style="text-align:center" colspan="10"><span
                  class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="color:#183e6f">
                </span></td>
              <tr *ngFor="let emp of oCliente.Contenido |searchconsultaCliente: searchtext; index as i"
                (click)="obtenCliente(emp.ClienteCodigo,emp.ClienteFilial)">
                <th scope="row">{{ i + 1 }}</th>
                <td>
                  <input style="border-color: #24a4cc;" type="checkbox">
                </td>
                <td class="FilasFonelli" style="text-align:left">{{emp.ClienteCodigo}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.ClienteFilial}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.RazonSocial}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.DatosGenerales.Sucursal}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.DatosGenerales.Status}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.Contactos.Contacto1Nombre}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.Contactos.Contacto2Nombre}}</td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>

    </div>
  </div>

  <div class="modal-footer">
    <!-- <button type="submit" class="btn btn-primary" [disabled]="!formLoginDistribuidor.form.valid">INGRESAR</button> -->
  </div>

</ng-template>