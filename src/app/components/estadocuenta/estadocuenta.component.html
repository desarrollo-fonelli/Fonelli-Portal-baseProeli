
<div class="example-container" [class.example-is-mobile]="mobileQuery.matches" *ngIf="shouldRun">
    <mat-toolbar >
      <button class="btn btn-primary" (click)="snav.toggle()"><mat-icon>menu</mat-icon></button>
      <div class="cat ">
        <a href="#">
          <img  src="../../../assets/images/principal/logo_fonelli.png"  >
        </a>      
      </div>
      <button (click)="EliminaSesion()" class="btn btn-primary btn-sm ml-auto">Cerrar Sesión</button>
    </mat-toolbar>
  
    <mat-sidenav-container class="example-sidenav-container"
                           [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
      <mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'"
                   [fixedInViewport]="mobileQuery.matches" fixedTopGap="56"
                   [opened]="mobileQuery.matches ? 'false' : 'true'">
        <mat-nav-list>
        
          <a mat-list-item [routerLink]="['/distribuidores/']"> <span class="font_side">Inicio</span></a>
          <a mat-list-item [routerLink]="['/distribuidores/datoscliente/']"><span class="font_side">Datos generales de Clientes</span></a>
          <a mat-list-item [routerLink]="['/distribuidores/consultaprecios/']"><span class="font_side">Consulta de Precios</span></a>
          <a mat-list-item [routerLink]="['/distribuidores/consultapedidos/']"><span class="font_side">Consulta de Pedidos</span></a>
          <a mat-list-item [routerLink]="['/distribuidores/relacionpedidos/']"><span class="font_side">Relación de Pedidos</span></a> 
          <a mat-list-item [routerLink]="['/distribuidores/estadocuenta/']"><span class="font_side">Estado de Cuenta</span></a>
          <a mat-list-item [routerLink]="['/distribuidores/ventasclientearticulo/']"><span class="font_side">Ventas por Artículo</span></a>
          
        </mat-nav-list>
      </mat-sidenav>
  
  
      
      <section >
        <div class="row">
          <div class="col-lg-6">
  
            <div class="card">
              <div class="card-body">
                <h2 class="card-title" >Estado de cuenta</h2>
  
                <!-- General Form Elements -->
                <form>
  
                    <div class="form-row">
                        <div class="form-group col-md-6">
                          <label >Desde cliente</label>
                          <input 
                            type="text" 
                            id="idDesCli"
                            class="form-control"
                            name="idDesCli"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.ClienteDesde"
                            disabled="{{ bCliente }}"
                            required
                          >
                        </div>
                        <div class="form-group col-md-6">
                          <label >Filial</label>
                          <input 
                            type="text" 
                            id="idDesFil"
                            class="form-control"
                            name="idDesFil"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.FiliadDesde"
                            disabled="{{ bCliente }}"
                            required
                          >
                        </div>
  
                        
                    </div>
  
                    <div class="form-row">
                        <div class="form-group col-md-6">
                          <label >Hasta cliente</label>
                          <input 
                            type="text" 
                            id="idHasCli"
                            class="form-control"
                            name="idHasCli"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.ClienteHasta"
                            disabled="{{ bCliente }}"
                            required
                          >
                        </div>
                        <div class="form-group col-md-6">
                          <label >Filial</label>
                          <input 
                            type="text" 
                            id="idHasFil"
                            class="form-control"
                            name="idHasFil"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.FilialHasta"
                            disabled="{{ bCliente }}"
                            required
                          >
                        </div>
                    </div>
  
                  
  
                    <div class="form-row">
                        <div class="form-group col-md-6">
                          <label  hidden="{{ bCliente }}">Desde cartera</label>
                          <input 
                            type="text" 
                            id="idDesCar"
                            class="form-control"
                            name="idDesCar"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.CarteraDesde"
                            hidden="{{ bCliente }}"
                            required
                          >
                        </div>
                        <div class="form-group col-md-6">
                          <label  hidden="{{ bCliente }}">Hasta cartera</label>
                          <input 
                            type="text" 
                            id="idHasCar"
                            class="form-control"
                            name="idHasCar"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.CarteraHasta"
                            hidden="{{ bCliente }}"
                            required
                          >
                        </div>
                    </div>
  
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <button type="submit" (click)="consultaEstadoCuenta()" class="btn btn-primary">BUSCAR</button>
                        </div>
                        <div class="form-group col-md-6">
                          <button hidden="{{ bCliente }}" type="submit"  class="btn btn-primary">CATALOGO DE CLIENTES</button>
                      </div>
                    </div>            
  
  
                  
  
                  
                </form><!-- End General Form Elements --> 
              </div> 
            </div>
          </div>
        </div>

        <div *ngIf="bBandera" class="table-responsive-sm">
          <table class="table table-hover table-striped">
            <thead>
              <tr>
                <th>Cliente</th>
                <th>Oficina</th>
                <th>Folio</th>
                <th>Saldo</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let cliente of oCliente ">
                <tr>
                  <td>{{cliente.ClienteCodigo+'-'+cliente.ClienteFilial}}</td>
                </tr>
                <ng-container *ngFor="let cartera of cliente.TipoCartera; let idx2 = index">
               <tr>
                  <td></td>
                  <td>{{cartera.TipoCarteraCodigo}}</td>
                  <td>{{cartera.TipoCarteraDescripc}}</td>
                  <td></td>
                </tr>
                <tr *ngFor="let movimento of cartera.Movimientos; let idx3 = index">
                  <!-- <td>{{idx1 + '-' + idx2 + '-' + idx3 }}</td> -->
                  <td>{{ movimento.OficinaFonelliCodigo}}</td>
                  <td>{{ movimento.DocumentoFolio}}</td>
                  <td>{{movimento.Saldo}}</td>
                </tr>
                  <tr>
                      <th></th>
                      <th></th>
                    <th>Sum</th>
                    <th>{{getTotalCuenta(cartera.Movimientos)}}</th>
                  </tr> 
           
          
          
              </ng-container>
             
                  <tr>
                      <th></th>
                      <th></th>
                    <th>Sum</th>
                    <th>{{getTotalCliente(cliente)}}<th>
                  </th> 
              
              </ng-container>
              
            </tbody>
          
                  <!-- <tr>
                      <th></th>
                      <th></th>
                    <th>Sum</th>
                    <th>{{getTotal}}</th>
                  </tr>
               -->
               
          </table>


      </div> 

      </section>
  
  
      
    </mat-sidenav-container>
  </div>
  
  <div *ngIf="!shouldRun">Please open on Stackblitz to see result</div>
  
  
  
  
  
  <!-- Copyright 2022 Google LLC. All Rights Reserved.
      Use of this source code is governed by an MIT-style license that
      can be found in the LICENSE file at https://angular.io/license -->