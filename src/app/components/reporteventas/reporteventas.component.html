     
      <section >
        <div class="container float-left">
        <div class="row">
          <div class="col-lg-12">
  
            <div class="card">
              <div class="card-body">
                <h2 class="card-title">Reporte de ventas</h2>
                <div class="row">
                     
                  <div class="form-group col-md-3">                   
                    <div class="form-check" >                        
                      <input 
                          class="form-check-input" 
                          type="radio" 
                          name="Tipo"
                          value="1"
                          #nombre="ngModel"
                          [(ngModel)]="oBuscar.Tipo"                            
                        >
                      <label class="form-check-label CamposFonelli" for="gridRadios1"> General</label>
                    </div>                   
                   
                  </div>

                  <div class="form-group col-md-3" >
                      <div class="form-check">
                        <input 
                          class="form-check-input" 
                          type="radio" 
                          name="Tipo"
                          value="2"
                          #nombre="ngModel"
                          [(ngModel)]="oBuscar.Tipo"                            
                        >
                        <label class="form-check-label CamposFonelli"> Por Agente</label>
                      </div>                   
                    
                    </div>

                    <div class="form-group col-md-1">
                      <!-- <div class="form-check"> -->
                        <label class="form-check-label CamposFonelli" > Agente </label>                  
                      <!-- </div>                      -->
                    </div> 
                    
                    <div class="form-group col-md-3" disabled="oBuscar.Tipo = '1'" >
                      <!-- <div class="form-check"> -->
                        <input 
                        type="text" 
                        id="idAgente"
                        class="form-control"
                        name="idAgente"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.AgenteCodigo"
                        required
                      >
                    </div> 
                  
                </div>
  
                <!-- General Form Elements -->
                <form class="table-responsive">

                  <div class="form-row"> 
                    
                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Desde numero</label>
                      <input 
                        type="text" 
                        id="idNumDes"
                        class="form-control"
                        name="idNumDes"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.ClienteDesde"
                        disabled="{{ bCliente }}"
                        required
                      >
                    </div>

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Desde Filial</label>
                      <input 
                        type="text" 
                        id="idFilDes"
                        class="form-control"
                        name="idFilDes"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.FilialDesde"
                        disabled="{{ bCliente }}"
                        required
                      >
                    </div>


                    <div class="form-group col-md-3">
                      <label class="CamposFonelli col-md-12" style="color: white;">----------</label>
                      <button  type="button" class="btnFonelli btn" (click)="openClientes(Clientes,true)" style="background-color:#24a4cc;"><i class="bi bi-search"></i></button>
                    </div>

                  
                    
                  </div>

                  <div class="form-row"> 

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Hasta numero</label>
                      <input 
                        type="text" 
                        id="idNumHas"
                        class="form-control"
                        name="idNumHas"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.ClienteHasta"
                        disabled="{{ bCliente }}"
                        required
                      >
                    </div>                    

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Hasta Filial</label>
                      <input 
                        type="text" 
                        id="idFilHas"
                        class="form-control"
                        name="idFilHas"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.FilialHasta"
                        disabled="{{ bCliente }}"
                        required
                      >
                    </div>

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli col-md-12" style="color: white;"></label>
                      <button  type="button" class="btnFonelli btn" (click)="openClientes(Clientes,false)" style="background-color:#24a4cc;"><i class="bi bi-search"></i></button>
                    </div>
                    
                  </div>
                  
                  <div class="form-row"> 
                    
                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Desde Categoria</label>
                      <select 
                        class="form-select" 
                        name="idCatDes"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.CategoriaDesde"
                        (ngModelChange)="cargaSubCat($event,true)"
                        required
                      >
                      <ng-container *ngFor='let dato of oCategoriasCon;' >
                        <option value="{{dato.CategoriaCodigo}}" *ngIf="dato.Subcategoria == ''  ">
                          {{dato.CategoriaCodigo}} - {{dato.CategoriaDescripc}}
                        </option>
                      </ng-container>
                      </select>
                    </div>

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">SubCategoria</label>
                      <select 
                      class="form-select" 
                      name="idSucaDes"
                      #nombre="ngModel"
                      [(ngModel)]="oBuscar.SubcategoDesde"                          
                      required
                    >
                      <ng-container *ngFor='let dato of oSubCatDesde;' >
                        <option value="{{dato.CategoriaCodigo}}">
                          {{dato.CategoriaCodigo}} - {{dato.CategoriaDescripc}}
                        </option>
                      </ng-container>

                    </select>
                  </div>

                  <div class="form-group col-md-3">
                    <label class="CamposFonelli">Hasta Categoria</label>
                    <select 
                      class="form-select" 
                      name="idCatHas"
                      #nombre="ngModel"
                      [(ngModel)]="oBuscar.CategoriaHasta"
                      (ngModelChange)="cargaSubCat($event,false)"
                      required
                    >
                      <ng-container *ngFor='let dato of oCategoriasCon;' >
                        <option value="{{dato.CategoriaCodigo}}" *ngIf="dato.Subcategoria == ''">
                          {{dato.CategoriaCodigo}} - {{dato.CategoriaDescripc}}
                        </option>
                      </ng-container>
                                              
                    </select>
                   
                  </div>
                  <div class="form-group col-md-3">
                    <label class="CamposFonelli">SubCategoria</label>
                    <select 
                      class="form-select" 
                      name="idSucaHas"
                      #nombre="ngModel"
                      [(ngModel)]="oBuscar.SubcategoHasta"                          
                      required
                    >
                      <ng-container *ngFor='let dato of oSubCatHasta;' >
                        <option value="{{dato.CategoriaCodigo}}">
                          {{dato.CategoriaCodigo}} - {{dato.CategoriaDescripc}}
                        </option>
                      </ng-container>
                                              
                    </select>
                  </div>

                  

                  </div>


                  <div class="form-row"> 

                    <div class="form-group col-md-3 table-responsive"  >
                      <label class="CamposFonelli">Desde fecha 1er periodo</label>
                      <input 
                        type="date" 
                        id="idFec1Des"
                        class="form-control"
                        name="idFec1Des"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.Fecha1Desde"
                        required
                      >
                    </div>

                    <div class="form-group col-md-3" >
                      <label class="CamposFonelli">Hasta fecha 1er periodo</label>
                      <input 
                        type="date" 
                        id="idFec1Has"
                        class="form-control"
                        name="idFec1Has"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.Fecha1Hasta"
                        required
                      >
                    </div>

                    <div class="form-group col-md-3 table-responsive">
                      <label class="CamposFonelli">Desde fecha 2do periodo</label>
                      <input 
                        type="date" 
                        id="idFec2Des"
                        class="form-control"
                        name="idFec2Des"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.Fecha2Desde"
                        required
                      >
                    </div>

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Hasta fecha 2do periodo</label>
                      <input 
                        type="date" 
                        id="idFec2Has"
                        class="form-control"
                        name="idFec2Has"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.Fecha2Hasta"
                        required
                      >
                    </div>

                  </div>

                  <div class="form-row"> 

                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Desde TCte</label>
                      <input 
                        type="text" 
                        id="idTipCteDes"
                        class="form-control"
                        name="idTipCteDes"
                        #nombre="ngModel"
                        [(ngModel)]="oBuscar.TipoClienteDesde"
                        required
                      >
                    </div>
                    <div class="form-group col-md-3">
                      <label class="CamposFonelli">Hasta TCte</label>
                      <input 
                      type="text" 
                      id="idTipCteHas"
                      class="form-control"
                      name="idTipCteHas"
                      #nombre="ngModel"
                      [(ngModel)]="oBuscar.TipoClienteHasta"
                      required
                    >
                    </div>


                  </div>
  
                  <!-- control de radios -->
                  <div class="row">
                     
                    <div class="form-group col-md-3">
                      <p class="CamposFonelli"> Ordenado por</p>                        
                      <div class="form-check" >                        
                        <input 
                            class="form-check-input" 
                            type="radio" 
                            name="OrdPor"
                            value="C"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.OrdenReporte"                            
                          >
                        <label class="form-check-label CamposFonelli" for="gridRadios1"> Número de cliente</label>
                      </div>
                      <div class="form-check">
                        <input 
                            class="form-check-input" 
                            type="radio" 
                            name="OrdPor"
                            value="I"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.OrdenReporte"                            
                          >
                        <label class="form-check-label CamposFonelli" for="gridRadios2">Importe de venta</label>
                      </div>
                      <div class="form-check">
                        <input 
                            class="form-check-input" 
                            type="radio" 
                            name="OrdPor"
                            value="V"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.OrdenReporte"                            
                          >
                        <label class="form-check-label CamposFonelli"> Valor agregado </label>
                      </div>
                    </div>

                    <div class="form-group col-md-3">
                      <p class="CamposFonelli"> Desglosado por cliente</p>  
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="DesCli"
                            value="S"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.DesglosaCliente"                            
                          >
                          <label class="form-check-label CamposFonelli"> Sí</label>
                        </div>
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="DesCli"
                            value="N"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.DesglosaCliente"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios2"> No </label>
                        </div>

                      </div>

                      <div class="form-group col-md-3">
                        <p class="CamposFonelli"> Desglosado por categoria</p> 
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="OrdPor"
                            value="S"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.DesglosaCategoria"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios1"> Sí </label>
                        </div>
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="OrdPor"
                            value="N"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.DesglosaCategoria"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios2"> No</label>
                        </div>
                      </div>

                      <div class="form-group col-md-3">
                        <p class="CamposFonelli"> Internos/Externos</p> 
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="TipOri"
                            value="I"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.TipoOrigen"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios1"> Internos </label>
                        </div>
                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="TipOri"
                            value="E"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.TipoOrigen"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios2"> Extenos </label>
                        </div>

                        <div class="form-check">
                          <input 
                            class="form-check-input" 
                            type="radio" 
                            name="TipOri"
                            value="T"
                            #nombre="ngModel"
                            [(ngModel)]="oBuscar.TipoOrigen"                            
                          >
                          <label class="form-check-label CamposFonelli" for="gridRadios2">Todos</label>
                        </div>
                        
                      </div>

                    
                  </div>
  
  
                   
                  <div *ngIf="sMensaje">
                    <p class="alert alert-danger" role="alert">{{sMensaje}}</p>
                  </div>
                  <div class="form-row">
                      <div class="form-group col-md-6">
                          <button type="submit" (click)="consultaReporteVentas()" class="btnFonelli btn"> <span *ngIf="bCargando" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="color:#183e6f"> </span> BUSCAR</button>
                      </div>
                  </div>                    
                </form><!-- End General Form Elements --> 
              </div> 
            </div>
          </div>
        </div>
      </div>

          <div *ngIf="bBandera" class="table-responsive container">
            <br>
            <div class="form-row">
              <!-- <div class="form-group col-md-1">              
                <label class="CamposFonelli">Búsqueda</label>
              </div>
              <div class="form-group col-md-5">              
                <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="searchtext"
                    placeholder="Search"                 
                  />
                </div> -->
                  <div class="form-group col-md-12">
                    <button class="btnImprimir btn float-right" (click)="downloadAsPDF()" >      
                      Imprimir PDF      
                    </button> 
                  </div> 
            </div>

        <!-- <div *ngIf="bFiltroOrden"  id="pdfTable" #pdfTable> -->
        <div  id="pdfTable" #pdfTable>
            <table class="table table-hover table-striped  ">
              <thead>
                <!-- <tr *ngIf="bFiltrResumido" class="EncTabla"> -->
<!--                 
                <tr>
                  <th></th>
                  <th></th>                  
                  <th colspan="3">1er Periodo</th>                  
                  <th></th>                  
                  <th></th>                                    
                  <th colspan="3" >2do Periodo</th>                  
                  <th></th>                  
                  <th></th> 
                </tr> -->
                <tr  class="EncTabla">
                  <th style="background-color: #24a4cc; color: white;">NUM FIL</th>
                  <th style="background-color: #24a4cc; color: white;">RAZON SOCIAL</th>
                  <th style="background-color: #24a4cc; color: white;">S</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">TL1</th>
                  <th *ngIf="!bCliente" style="background-color: #24a4cc; color: white; text-align: right;">TL2</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">TP</th>
                  <th *ngIf="!bCliente" style="background-color: #24a4cc; color: white; text-align: right;">TC</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">AG</th>              
                </tr>
                <!-- <tr *ngIf="!bFiltrResumido" class="EncTabla">
                  <th style="background-color: #24a4cc; color: white;">CÓDIGO</th>
                  <th style="background-color: #24a4cc; color: white;">DESCRIPCIÓN</th>
                  <th style="background-color: #24a4cc; color: white;">TIPO</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">PIEZAS</th>
                  <th *ngIf="!bCliente" style="background-color: #24a4cc; color: white; text-align: right;">%P/CAT/TH</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">GRAMOS</th>
                  <th *ngIf="!bCliente" style="background-color: #24a4cc; color: white; text-align: right;">%G/CAT</th>
                  <th style="background-color: #24a4cc; color: white; text-align: right;">IMPORTE VENTA</th>              
                </tr> -->
              </thead>
              <tbody>
                <ng-container *ngFor="let repVen of oReporteVentasRes.Contenido | searchventasclientearticulo: searchtext">
                  <tr class="table-info">                    
                    <td class="FilasFonelli">{{repVen.ClienteCodigo + ' ' + repVen.ClienteNombre }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td *ngIf="!bCliente"></td>
                    <td></td> 
                    <td *ngIf="!bCliente"></td>
                    <td></td>                 
                  </tr>

                </ng-container>
                            

    
              </tbody>               
            </table>
        </div> 


        <br>
        <br>

          <label>Clientes con venta</label> 
          <table class="table table-hover table-striped  ">
            <thead>
              <tr class="EncTabla">
                <th style="background-color: #24a4cc; color: white;"></th>
                <th style="background-color: #24a4cc; color: white;">1er Periodo</th>
                <th style="background-color: #24a4cc; color: white;">2do Periodo</th>                              
              </tr>
            </thead>
            <tbody>                       

  
          </tbody>               
        </table>

        <br>
        <br>

          <label>Total General</label> 
          <table class="table table-hover table-striped  ">
            <thead>
              <tr class="EncTabla">
                <th style="background-color: #24a4cc; color: white;">CAT</th>
                <th style="background-color: #24a4cc; color: white;">DESCRIPCIÓN CATEGORIA</th>
                <th style="background-color: #24a4cc; color: white;">PIEZAS</th>                              
                <th style="background-color: #24a4cc; color: white;">GRAMOS</th>                              
                <th style="background-color: #24a4cc; color: white;">IMPORTE</th>                              
                <th style="background-color: #24a4cc; color: white;">%S/TOT</th>                              
                <th style="background-color: #24a4cc; color: white;">VAL AGREG</th>                              
                <th style="background-color: #24a4cc; color: white;">%S/TOT</th>                              
                <th style="background-color: #24a4cc; color: white;">PIEZAS</th>                              
                <th style="background-color: #24a4cc; color: white;">GRAMOS</th>                              
                <th style="background-color: #24a4cc; color: white;">IMPORTE</th>                              
                <th style="background-color: #24a4cc; color: white;">%S/TOT</th>                              
                <th style="background-color: #24a4cc; color: white;">VAL AGREG</th>                              
                <th style="background-color: #24a4cc; color: white;">%S/TOT</th>                              
              </tr>
            </thead>
            <tbody>                       

  
          </tbody>               
        </table>
      

    </div> 
  </section>
  
  
      
  
<!--Modal catalogo clientes-->
<ng-template #Clientes let-modal >
  <div class="modal-header" >        
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>      

  <div class="modal-body-tables" style="overflow-y: scroll;" >

    <div class="container">
      <div class="row">

        <div class="form-group col-md-1">              
          <br>
          <label class="CamposFonelli">Buscar:</label>
        </div>
        <div class="form-group col-md-5">    
          <br>          
          <input
              type="text"
              class="form-control"
              [(ngModel)]="searchtext"
              placeholder="Search"                 
            />
        </div>
            

        <div class="col-12" >                     
          <table  class="table table-striped">
            <thead>
            <tr class="EncTabla">
              <th>#</th>
              <th scope="col" ></th>
              <th scope="col" >NUM</th>                         
              <th scope="col" >FIL</th>
              <th scope="col" >RAZÓN SOCIAL</th>
              <th scope="col" >SUCURSAL/NOMBRE</th>
              <th scope="col" >S</th>
              <th scope="col" >CONTACTO1</th>
              <th scope="col" >CONTACTO2</th>                          
            </tr>
            </thead>
            <tbody>
              <td *ngIf="bCargandoClientes" class="FilasFonelli" style="text-align:center" colspan="10"><span   class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="color:#183e6f"> </span></td>
              <tr *ngFor="let emp of oCliente.Contenido |searchconsultaCliente: searchtext; index as i" (click)="obtenCliente(emp.ClienteCodigo,emp.ClienteFilial)">
                <th scope="row">{{ i + 1 }}</th>
                <td>                              
                  <input  style="border-color: #24a4cc;" type="checkbox">
                </td> 
                <td class="FilasFonelli" style="text-align:left">{{emp.ClienteCodigo}}</td>                           
                <td class="FilasFonelli" style="text-align:left">{{emp.ClienteFilial}}</td>                
                <td class="FilasFonelli" style="text-align:left">{{emp.RazonSocial}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.DatosGenerales.Sucursal}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.DatosGenerales.Status}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.Contactos.Contacto1Nombre}}</td>
                <td class="FilasFonelli" style="text-align:left">{{emp.Contactos.Contacto2Nombre}}</td>                                  
              </tr>
            </tbody>
          </table>            
          
        </div>  
      </div>
        
    </div>
  </div>


  <div class="modal-footer">
    <!-- <button type="submit" class="btn btn-primary" [disabled]="!formLoginDistribuidor.form.valid">INGRESAR</button> -->
    
  </div>

</ng-template> 
